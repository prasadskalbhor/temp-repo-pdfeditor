<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Adobe PDF Embed API Example</title>
  </head>
  <body>
    <h1>This is pdf editor :: </h1>
    <div id="adobe-dc-view" style="height: 600px;"></div>
    <button id="save-button" style="margin-top: 20px;">Save PDF Data</button>
    <script src="https://acrobatservices.adobe.com/view-sdk/viewer.js"></script>
    <script>
      let updatedFormData = {}; // Object to store updated form field data

      document.addEventListener("adobe_dc_view_sdk.ready", function () {
        const adobeDCView = new AdobeDC.View({
          clientId: "dda30f284c554924b583141c6fe03f20",
          divId: "adobe-dc-view",
        });

        // Render the PDF with the given URL
        adobeDCView.previewFile(
          {
            content: { location: { url: "./mypdf.pdf" } },
            metaData: { fileName: "mypdf.pdf" },
          },
          {}
        );

        // Add form field interaction handler
        adobeDCView.registerCallback(
          AdobeDC.View.Enum.CallbackType.FORM_FIELD_INTERACTION,
          (event) => {
            if (event.type === "fieldChanged") {
              updatedFormData[event.data.fieldName] = event.data.value;
              console.log("Form Field Updated:", updatedFormData);
            }
          },
          {}
        );
      });

      // Save button click listener
      document.getElementById("save-button").addEventListener("click", function () {
        console.log("Final Form Data:", updatedFormData);
        alert("Form data saved. Check console for details.");
        // Here, you can pass updatedFormData to your backend or use it with pdf-lib
      });
    </script>
  </body>
</html>
